<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منصة الذكاء الاصطناعي المتكاملة</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-blue-800">منصة الذكاء الاصطناعي المتكاملة</h1>
            <p class="text-gray-600 mt-2">توليد فيديو Veo3، أصوات، وصور باستخدام Google AI</p>
        </header>

        <div class="bg-white rounded-lg shadow-md overflow-hidden mb-8">
            <div class="flex border-b">
                <button class="tab-btn py-4 px-6 font-medium text-gray-600 hover:text-blue-500 focus:outline-none border-b-2 border-transparent hover:border-blue-300" data-tab="video">فيديو Veo3</button>
                <button class="tab-btn py-4 px-6 font-medium text-gray-600 hover:text-blue-500 focus:outline-none border-b-2 border-transparent hover:border-blue-300" data-tab="audio">توليد أصوات</button>
                <button class="tab-btn py-4 px-6 font-medium text-gray-600 hover:text-blue-500 focus:outline-none border-b-2 border-transparent hover:border-blue-300" data-tab="image">توليد صور</button>
            </div>

            <!-- قسم فيديو Veo3 -->
            <div id="video" class="tab-content active p-6">
                <div class="mb-4">
                    <label for="video-prompt" class="block text-gray-700 font-medium mb-2">وصف الفيديو:</label>
                    <textarea id="video-prompt" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="صِف الفيديو الذي تريد إنشاءه بالتفصيل..."></textarea>
                </div>
                <div class="mb-4">
                    <label for="video-duration" class="block text-gray-700 font-medium mb-2">المدة (ثانية):</label>
                    <select id="video-duration" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="5">5 ثواني</option>
                        <option value="10" selected>10 ثواني</option>
                        <option value="15">15 ثانية</option>
                    </select>
                </div>
                <button id="generate-video" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-200">
                    توليد الفيديو
                </button>
                <div id="video-result" class="mt-6 hidden">
                    <video id="generated-video" controls class="w-full rounded-lg"></video>
                    <div class="mt-4 flex justify-center">
                        <a id="download-video" href="#" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-200">
                            تحميل الفيديو
                        </a>
                    </div>
                </div>
            </div>

            <!-- قسم توليد الأصوات -->
            <div id="audio" class="tab-content p-6">
                <div class="mb-4">
                    <label for="audio-text" class="block text-gray-700 font-medium mb-2">النص:</label>
                    <textarea id="audio-text" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل النص الذي تريد تحويله إلى صوت..."></textarea>
                </div>
                <div class="mb-4">
                    <label for="audio-voice" class="block text-gray-700 font-medium mb-2">نوع الصوت:</label>
                    <select id="audio-voice" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="male1">رجل - صوت عميق</option>
                        <option value="female1">امرأة - صوت ناعم</option>
                        <option value="male2">رجل - صوت عادي</option>
                    </select>
                </div>
                <button id="generate-audio" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-200">
                    توليد الصوت
                </button>
                <div id="audio-result" class="mt-6 hidden">
                    <audio id="generated-audio" controls class="w-full"></audio>
                    <div class="mt-4 flex justify-center">
                        <a id="download-audio" href="#" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-200">
                            تحميل الصوت
                        </a>
                    </div>
                </div>
            </div>

            <!-- قسم توليد الصور -->
            <div id="image" class="tab-content p-6">
                <div class="mb-4">
                    <label for="image-prompt" class="block text-gray-700 font-medium mb-2">وصف الصورة:</label>
                    <textarea id="image-prompt" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="صِف الصورة التي تريد إنشاءها بالتفصيل..."></textarea>
                </div>
                <div class="mb-4">
                    <label for="image-style" class="block text-gray-700 font-medium mb-2">النمط:</label>
                    <select id="image-style" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="realistic">واقعي</option>
                        <option value="cartoon">كرتون</option>
                        <option value="painting">لوحة فنية</option>
                    </select>
                </div>
                <button id="generate-image" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-200">
                    توليد الصورة
                </button>
                <div id="image-result" class="mt-6 hidden text-center">
                    <img id="generated-image" src="" class="max-w-full h-auto rounded-lg mx-auto" alt="الصورة المولدة">
                    <div class="mt-4 flex justify-center">
                        <a id="download-image" href="#" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-200">
                            تحميل الصورة
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div id="loading" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
            <div class="bg-white p-6 rounded-lg text-center">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"></div>
                <p class="text-lg font-medium">جاري التوليد، الرجاء الانتظار...</p>
            </div>
        </div>

        <div id="error-toast" class="fixed bottom-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg hidden transform transition-transform duration-300 translate-y-10">
            <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span id="error-message"></span>
            </div>
        </div>
    </div>

    <script>
        // API Key
        const API_KEY = 'AIzaSyBM1yuPqbfENrLGXZI6auB-MgaxwltjHuA';
        
        // تبويب الواجهة
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('border-blue-500', 'text-blue-500'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                btn.classList.add('border-blue-500', 'text-blue-500');
                document.getElementById(btn.dataset.tab).classList.add('active');
            });
        });

        // إظهار/إخفاء التحميل
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'flex' : 'none';
        }

        // إظهار الأخطاء
        function showError(message) {
            const toast = document.getElementById('error-toast');
            document.getElementById('error-message').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('translate-y-0'), 10);
            
            setTimeout(() => {
                toast.classList.remove('translate-y-0');
                setTimeout(() => toast.classList.add('hidden'), 300);
            }, 5000);
        }

        // توليد الفيديو باستخدام Veo3
        document.getElementById('generate-video').addEventListener('click', async () => {
            const prompt = document.getElementById('video-prompt').value.trim();
            const duration = document.getElementById('video-duration').value;
            
            if (!prompt) {
                showError('الرجاء إدخال وصف الفيديو');
                return;
            }

            showLoading(true);
            document.getElementById('video-result').classList.add('hidden');

            try {
                // توليد مواصفات الفيديو باستخدام Gemini
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `أنت مساعد لإنشاء مواصفات فيديو لـ Veo3. أنشئ مواصفات دقيقة لفيديو مدته ${duration} ثانية بناءً على الوصف التالي:\n\n${prompt}\n\nيجب أن تتضمن المواصفات المشاهد، الحركة، الإضاءة، الألوان، والأجواء.`
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error('فشل في توليد مواصفات الفيديو');
                }

                const data = await response.json();
                const videoSpecs = data.candidates[0].content.parts[0].text;

                // هنا يجب استدعاء API الخاص بـ Veo3 - هذا مثال توضيحي
                // في الواقع، استخدم API الخاص بـ Veo3 مع videoSpecs
                console.log('مواصفات الفيديو:', videoSpecs);
                
                // محاكاة انتظار توليد الفيديو
                await new Promise(resolve => setTimeout(resolve, 3000));

                // في الواقع، استخدم URL الفيديو الذي يعيده Veo3 API
                const videoUrl = 'https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4';
                
                document.getElementById('generated-video').src = videoUrl;
                document.getElementById('download-video').href = videoUrl;
                document.getElementById('video-result').classList.remove('hidden');

            } catch (error) {
                showError(error.message);
            } finally {
                showLoading(false);
            }
        });

        // توليد الصوت
        document.getElementById('generate-audio').addEventListener('click', async () => {
            const text = document.getElementById('audio-text').value.trim();
            const voice = document.getElementById('audio-voice').value;
            
            if (!text) {
                showError('الرجاء إدخال النص');
                return;
            }

            showLoading(true);
            document.getElementById('audio-result').classList.add('hidden');

            try {
                // استدعاء Text-to-Speech API
                const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        input: { text: text },
                        voice: {
                            languageCode: 'ar-XA',
                            name: voice === 'male1' ? 'ar-XA-Standard-B' : 
                                  voice === 'female1' ? 'ar-XA-Standard-A' : 'ar-XA-Standard-D'
                        },
                        audioConfig: {
                            audioEncoding: 'MP3'
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('فشل في توليد الصوت');
                }

                const data = await response.json();
                const audioContent = data.audioContent;
                const audioUrl = `data:audio/mp3;base64,${audioContent}`;
                
                document.getElementById('generated-audio').src = audioUrl;
                document.getElementById('download-audio').href = audioUrl;
                document.getElementById('download-audio').download = 'generated-audio.mp3';
                document.getElementById('audio-result').classList.remove('hidden');

            } catch (error) {
                showError(error.message);
            } finally {
                showLoading(false);
            }
        });

        // توليد الصور
        document.getElementById('generate-image').addEventListener('click', async () => {
            const prompt = document.getElementById('image-prompt').value.trim();
            const style = document.getElementById('image-style').value;
            
            if (!prompt) {
                showError('الرجاء إدخال وصف الصورة');
                return;
            }

            showLoading(true);
            document.getElementById('image-result').classList.add('hidden');

            try {
                // استدعاء Image Generation API
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro-vision:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `أنشئ صورة ${style} بناءً على الوصف التالي:\n\n${prompt}`
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error('فشل في توليد الصورة');
                }

                const data = await response.json();
                // في الواقع، استخدم URL الصورة التي يعيدها API
                const imageUrl = 'https://storage.googleapis.com/gweb-uniblog-publish-prod/images/Google_Gemini.max-1100x1100.jpg';
                
                document.getElementById('generated-image').src = imageUrl;
                document.getElementById('download-image').href = imageUrl;
                document.getElementById('download-image').download = 'generated-image.jpg';
                document.getElementById('image-result').classList.remove('hidden');

            } catch (error) {
                showError(error.message);
            } finally {
                showLoading(false);
            }
        });
    </script>
</body>
</html>
